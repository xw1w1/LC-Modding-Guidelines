# Creating your own moon.

**Before reading this chapter, make sure you have already completed the [mod setup](https://github.com/xw1w1/LC-Modding-Guidelines/blob/main/en/DawnLib/2.%20Mod%20setup.md).**
## Moon Definition.

Create a new `MoonDefinition` (`Right Click > Create > DawnLib > Definitions > Moon Definition`) inside `<YourModName>/Content/Moons/<YourMoon>/Registry/`.

## DuskMoonDefinition Settings.

| Field | Description |
| :---- | :---- |
| `Namespace` | Unique identifier prefix for your mod or content. Example: `code_rebirth`. |
| `Selectable Level` | Responsible for the selectable level script, we'll deal with him later. |
| `Cost` | Responsible for the cost of flying to the planet (like on `Rend`, `Dine`, etc.). |
| `Outside Enemies Spawn Probability Range` | Range of outside enemies that spawn each cycle, vanilla has it hardcoded to 3 by default. |

<img width="853" height="581" alt="image" src="https://github.com/user-attachments/assets/89c4bd02-8251-4407-a785-db80cf651d4d" />

### Other configuration entries

| Field | Description |
| :---- | :---- |
| **Config Entries** | Place you can create various config entries in. |
| `Key` | Becomes autofilled in by reading the planet name in your `SelectableLevel`. |
| `Terminal Preficate` (Optional) | Allows conditional logic for when the moon should appear in the terminal. |
| `Pricing Strategy` (Optional) | Defines custom pricing logic for your moon that supercedes the `Cost` field. |
| `Generate Enemy PowerCount Configs` | Creates a config to edit the power count of inside, outside and daytime enemies. |
| `Generate Enemy SpawnCurve Configs` | Creates a config to edit the animation curves for enemy spawn weights. |
| `Generate Enemy Spawn Probability Range Configs` | Creates a config to edit the random range of enemies that spawn for each cycle for inside outside and daytime enemies. |
| `Generate MinMax Scrap Config` | Creates a config to edit the min and max scrap amounts of a moon. |
| `Generate Time Config` | Creates a config to edit the time speed multiplier of the moon. |
| `Generate Cost Config` | Creates a config to edit the cost of the moon. |
| `Generate Disable Predicate Config` | Creates a config to get rid of the Terminal Predicate affecting the moon. |
| `Generate Disable Pricing Strategy Config` | Creates a config to get rid of the pricing strategy and rely purely on cost. |

## Scenes
The **Scenes** array determines which scenes are linked to this moon.

You **must add at least one entry** to this list.

<img width="841" height="403" alt="image" src="https://github.com/user-attachments/assets/168cdaf1-9d27-4c73-b8ec-ed0cf648a5c7" />

| Field | Description |
| :---- | :---- |
| `Scene` | Scene asset that you want to include. |
| `Namespace` | Unique identifier prefix for your mod or content. Example: `code_rebirth`. |
| `Landing Override` | Custom scene used when the player lands. |
| `Leaving Override` | Custom scene used when leaving the moon. |
| `Base Weight` | Controls how often the scene appears relative to others. |

## Weather Configs
You can adjust scene selection based on weather conditions (Eclipsed, Rainy, Stormy etc.).

<img width="824" height="159" alt="image" src="https://github.com/user-attachments/assets/1a614a19-5d43-4f1e-a42d-3793a2eb2ee0" />

# SelectableLevel.
`SelectableLevel` is, in general, the selectable level itself.

   You can find examples from the game in `Assets/LethalCompany/Game/ScriptableObjects/SelectableLevel/` folder.

   For example, let's choose `AdamanceLevel`. Copy it and paste it into your mod's folder.

## Selectable Level Settings.
<img width="832" height="400" alt="image" src="https://github.com/user-attachments/assets/d102820c-6049-47f6-86bb-cd6a39f31417" />

- `Planet Prefab` - planet prefab, which is drawn on the outside of the ship and is usually not even visible. There are three types: desert, grassy, snowy.

<img width="237" height="93" alt="image" src="https://github.com/user-attachments/assets/a5367597-cbf9-470b-a759-cc8a9b4ccb67" />

- `Scene Name` - a fairly self-descriptive field name. You must enter the EXACT name of the scene where your "moon" will be placed.

- `Level ID` - doesn't matter in our case. Set it to `0`, then LLL will do all the work itself at runtime.

- `Locked For Demo` - determines whether your planet will be open for visiting in demo, _hovewer i ain't really seen any kind of demo for Lethal Company, so just left it unchecked_.

- `Spawn Enemies And Scrap` - determines whether enemies and scrap should spawn on this moon.

- `Planet Name` - the name of your moon. For my `12-Aerona` I use the name "`12 Aerona`", in the terminal it's displayed simply as `Aerona`.

- `Level Description` - the description of the planet. Exactly what appears on the main ship monitor when you are in orbit of this planet.

   There are no any strict limits about it's size, but you may look at it in game and see if it looks good.

   In other case, you can do as much as you want, just add [AutoScroll](https://thunderstore.io/c/lethal-company/p/mrov/AutoScroll/) as a dependency so that the text slowly scrolls when it’s on the main monitor if it’s too long instead of being cut off.

- `Video Reel` - the video clip that appears on the main ship monitor when you are orbiting this planet.

- `Risk Level` - the danger level of the planet. 

   `A`, `B`, `C`, `D`, `S`, `S+`, `S++`, anything of your choice. 

   In game, it is displayed as `Hazard Level` when you land on the planet.

- `Time To Arrive` - the amount of time it will take for the ship to land. In the case of `Adamance`, it's 4 seconds.

- `Day Speed Multiplier` - the speed multiplier at which the day passes on the planet. 

   Standard is `1`, but if you want to slow down or speed up time on the planet, you can play around with it.

## Weather Settings.
<img width="839" height="528" alt="image" src="https://github.com/user-attachments/assets/ec6d8896-225b-44f1-b181-c21b4a24758b" />

**`Random Weathers`** - an array of elements that will be used when choosing the weather.

- `Weather Type` - weather type, includes Rainy, Stormy, Foggy, Flooded, Eclipsed.

   **Keep in mind that with the Flooded weather type, everything below the ship's level will be flooded with.**

- `Weather Variable 1/2` - variables used to set some of the weather settings.

<img width="741" height="410" alt="image" src="https://github.com/user-attachments/assets/3dac0009-d101-4dcc-9ce0-2115ea4beffe" />

- `Override Weather` - whether the weather should be fixed to the one selected in `Override Weather Type`.

- `Override Weather Type` - weather type to override with.

- `Current Weather` - Runtime variable responsible for the current weather on the moon. Don't touch.

## Level Settings.
<img width="827" height="337" alt="image" src="https://github.com/user-attachments/assets/eb98a9e1-6a14-4d6e-8163-a76c1a7e88f0" />

- `Factory Size Multiplier` - a value that affects the size of the facility itself. 

   On `Titan`, this value is `2.2`, while on `Experimentation` it's `1`. Choose the one that's comfortable for you.

### Traps appearing inside the facility
<img width="836" height="606" alt="image" src="https://github.com/user-attachments/assets/d0fdd505-218b-4f1f-b973-63975da31315" />

- `Spawnable Map Objects` - these are mines, turrets, and other traps that may await you inside. 

Here you can customize them, remove one, or edit them, but often this element is left untouched.

### Decorations outside
<img width="839" height="291" alt="image" src="https://github.com/user-attachments/assets/b9f21071-206c-4907-94e0-70f9c61aaa94" />

- `Spawnable Outside Objects` - these are additional decorative elements that appear outside and are distributed across the map.

They include leafless trees, a pile of rocks, a giant pumpkin, etc.

## Scrap Settings.

### Scrap appearing inside the facility
<img width="849" height="218" alt="image" src="https://github.com/user-attachments/assets/38f2e746-39c0-48d4-a2be-226965e3a7b3" />

- `Spawnable Scrap` is an array of items that can appear inside the facility and that players can collect.

- `Spawnable Item` is an `Item` type to spawn.

- `Rarity` - determines how often an item can be encountered on your map.

### Scrap value settings
<img width="837" height="87" alt="image" src="https://github.com/user-attachments/assets/0b3dc798-dfa7-4b9c-8873-23f3de65fb98" />

- `Min Scrap` - the minimum number of items that can appear inside the facility.

- `Max Scrap` - the maximum number of items that can appear inside the facility.

- `Min Scrap Value` - the minimum total value of all items inside the facility.

- `Max Scrap Value` - the maximum total value of all items inside the facility.

   **Don't try to overly increase or decrease min/max scrap value, try to make it somewhat stable. If your planet is not a lategame option, don't make max scrap value exceed 1000 or more, although, this depends on the overall difficulty of your planet and your intentions.**

# Enemies Settings.
<img width="828" height="90" alt="image" src="https://github.com/user-attachments/assets/e7dd1be3-fe46-401a-a0d4-65d153e4544a" />

- `Max Enemy Power Count` - the maximum power count of entities that can exist simultaneously inside the facility.

- `Max Outside Enemy Power Count` - the maximum power count of hostile entities that can exist simultaneously outside.

- `Max Daytime Enemy Power Count` - the maximum power count of daytime entities that can exist simultaneously outside.

   The idea is that “`Blob`” can be power of `1`, and “`Coil Head`” - `3`, that allows each type of enemies to contribute simulganeously according to it's impact.

   You can find out what weight each entity have by referring to the wiki: https://lethal.miraheze.org/wiki/Entities#Entity_list.

## Enemies spawn chances.

**`Enemies`** - a list of creatures that will appear inside the facility.

- `Rarity` - the chance of a specific creature appearing during a spawn cycle.

<img width="839" height="446" alt="image" src="https://github.com/user-attachments/assets/fc11729c-1645-4304-8ebb-d46e944993f1" />

- `EnemyType` has a number of implementations, precisely those that we may encounter in the game.

<img width="1205" height="227" alt="image" src="https://github.com/user-attachments/assets/456cb9f4-1709-479f-bf4d-2424f9be89f5" />

   **Keep in mind that some of the creatures in this list may appear outside, and their presence inside the facility may look very strange and wrong, although the game allows it.**

### Outside enemies
<img width="833" height="220" alt="image" src="https://github.com/user-attachments/assets/dcb40ea9-74dc-4c43-a25e-81391fbbb3ba" />

- **`Outside Enemies`** - a list of creatures that will appear outside, such as forest giants, robots (RadMechs), etc.

   **For some entities that should be inside, placing them outside can cause serious lag, but I support experiments and good options could include `SandSpider` or `MaskedPlayerEnemy`.**

### Daytime emenies
<img width="944" height="293" alt="image" src="https://github.com/user-attachments/assets/a5c3d274-cc1a-42e3-958b-86163c780ec6" />

- **`Daytime Enemies`** - the ones you will see at first when you arrive on the `March` or `Vow`, these are usually harmless swarms of flies.

   `RedLocustBees` are the `Circuit Bees` ones that spawns with a Bee Hives on the moon.

   https://lethal-company.fandom.com/wiki/Circuit_Bee

### Miscellaneous
Imagine that at a certain moment (spawn cycle), the game selects a random number between `X` and `Y`. If this number `Z` is less than or equal to the number `W` (on the graph line), then the entity will spawn.

<img width="950" height="71" alt="image" src="https://github.com/user-attachments/assets/fecb2d3d-1e10-48c1-9f2c-e246b549426f" />

- **`Enemy Spawn Chance Throughout Day`** - graph responsible for the spawn chance of indoors enemies throughout the day.

   Such as Coil head, ghost girl, spider, nutcracker etc.

- **`Outside Enemy Spawn Chance Through Day`** - graph responsible for the spawn chance of outdoors enemies throughout the day.

- **`Daytime Enemy Spawn Chance Through Day`** - graph responsible for the spawn chance of outdoors entities throughout the day.

- **`Spawn Probability Range`** - (?)

- **`Daytime Enemies Probability Range`** - (?)

## Other level settings.
<img width="834" height="48" alt="image" src="https://github.com/user-attachments/assets/eadd3dd9-b289-4243-85cf-4b29188009ea" />

`Level Includes Snow Footprints` - whether snow footprints should be left on this planet. 

   For full functionality, you'll need to work with the `Terrain` layers and take some Systems from other vanilla moons.

`Level Icon String` - moon icon used in Discord RPC, but the necessity of this field remains questionable.

   ## The (?) symbol means that i'm not entirely sure about the correctness of the phrasing and I would not want to publish my “assumptions” in this document.
